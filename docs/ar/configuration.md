# Intlayer وثائق التكوين

## نظرة عامة

تتيح ملفات تكوين Intlayer تخصيص جوانب مختلفة من الإضافة، مثل التدويل، الوسيط، ومعالجة المحتوى. توفر هذه الوثيقة وصفًا تفصيليًا لكل خاصية في التكوين.

---

## دعم ملفات التكوين

يدعم Intlayer تنسيقات ملفات التكوين JSON، JS، MJS، و TS:

- `intlayer.config.ts`
- `intlayer.config.js`
- `intlayer.config.json`
- `intlayer.config.cjs`
- `intlayer.config.mjs`
- `.intlayerrc`

---

## ملف تكوين مثال

```typescript fileName="intlayer.config.ts" codeFormat="typescript"
import { Locales, type IntlayerConfig } from "intlayer";

const config: IntlayerConfig = {
  internationalization: {
    locales: [Locales.ENGLISH],
  },
  content: {
    typesDir: "content/types",
  },
  middleware: {
    noPrefix: false,
  },
};

export default config;
```

```javascript fileName="intlayer.config.cjs" codeFormat="commonjs"
const { Locales } = require("intlayer");

/** @type {import('intlayer').IntlayerConfig} */
const config = {
  internationalization: {
    locales: [Locales.ENGLISH],
  },
  content: {
    typesDir: "content/types",
  },
  middleware: {
    noPrefix: false,
  },
};

module.exports = config;
```

```json5 fileName=".intlayerrc" codeFormat="json"
{
  "internationalization": {
    "locales": ["en"],
  },
  "content": {
    "typesDir": "content/types",
  },
  "middleware": {
    "noPrefix": false,
  },
}
```

---

## مرجع التكوين

تصف الأقسام التالية إعدادات التكوين المختلفة المتاحة لـ Intlayer.

---

### تكوين التدويل

تعريف الإعدادات المتعلقة بالتدويل، بما في ذلك اللغات المتاحة واللغة الافتراضية للتطبيق.

#### الخصائص

- **locales**:

  - _النوع_: `string[]`
  - _الافتراضي_: `['en']`
  - _الوصف_: قائمة اللغات المدعومة في التطبيق.
  - _مثال_: `['en', 'fr', 'es']`

- **requiredLocales**:
  - _النوع_: `string[]`
  - _الافتراضي_: `[]`
  - _الوصف_: قائمة اللغات المطلوبة في التطبيق.
  - _مثال_: `[]`
  - _ملاحظة_: إذا كانت فارغة، فإن جميع اللغات مطلوبة في وضع `strict`.
  - _ملاحظة_: تأكد من أن اللغات المطلوبة محددة أيضًا في حقل `locales`.
- **strictMode**:

  - _النوع_: `string`
  - _الافتراضي_: `inclusive`
  - _الوصف_: ضمان تنفيذ قوي للمحتوى المترجم باستخدام TypeScript.
  - _ملاحظة_: إذا تم تعيينها إلى "strict"، فإن وظيفة الترجمة `t` ستتطلب تعريف كل لغة معلنة. إذا كانت لغة واحدة مفقودة، أو إذا لم يتم الإعلان عن لغة في التكوين الخاص بك، فسيتم طرح خطأ.
  - _ملاحظة_: إذا تم تعيينها إلى "inclusive"، فإن وظيفة الترجمة `t` ستتطلب تعريف كل لغة معلنة. إذا كانت لغة واحدة مفقودة، فسيتم عرض تحذير. ولكن سيتم قبولها إذا لم يتم الإعلان عن لغة في التكوين الخاص بك، ولكنها موجودة.
  - _ملاحظة_: إذا تم تعيينها إلى "loose"، فإن وظيفة الترجمة `t` ستقبل أي لغة موجودة.

- **defaultLocale**:
  - _النوع_: `string`
  - _الافتراضي_: `'en'`
  - _الوصف_: اللغة الافتراضية المستخدمة كنسخة احتياطية إذا لم يتم العثور على اللغة المطلوبة.
  - _مثال_: `'en'`
  - _ملاحظة_: يتم استخدام هذا لتحديد اللغة عندما لا يتم تحديد أي لغة في عنوان URL أو الكوكيز أو الرأس.

---

### تكوين المحرر

تعريف الإعدادات المتعلقة بالمحرر المدمج، بما في ذلك منفذ الخادم وحالة النشاط.

#### الخصائص

- **applicationURL**:

  - _النوع_: `string`
  - _الافتراضي_: `'*'`
  - _الوصف_: عنوان URL للتطبيق. يستخدم لتقييد أصل المحرر لأسباب أمنية.
  - _مثال_:
    - `'*'`
    - `'http://localhost:3000'`
    - `'https://example.com'`
    - `process.env.INTLAYER_EDITOR_URL`
  - _ملاحظة_: عنوان URL للتطبيق. يستخدم لتقييد أصل المحرر لأسباب أمنية. إذا تم تعيينه إلى `'*'`، فإن المحرر يكون متاحًا من أي أصل.

- **port**:

  - _النوع_: `number`
  - _الافتراضي_: `8000`
  - _الوصف_: المنفذ المستخدم بواسطة خادم المحرر المرئي.

- **editorURL**:

  - _النوع_: `string`
  - _الافتراضي_: `'http://localhost:8000'`
  - _الوصف_: عنوان URL لخادم المحرر. يستخدم لتقييد أصل المحرر لأسباب أمنية.
    - `'http://localhost:3000'`
    - `'https://example.com'`
    - `process.env.INTLAYER_EDITOR_URL`
    - `''*'`
  - _ملاحظة_: عنوان URL لخادم المحرر للوصول من التطبيق. يستخدم لتقييد الأصول التي يمكنها التفاعل مع التطبيق لأسباب أمنية. إذا تم تعيينه إلى `'*'`، فإن المحرر يكون متاحًا من أي أصل. يجب تعيينه إذا تم تغيير المنفذ، أو إذا تم استضافة المحرر على نطاق مختلف.

- **cmsURL**:

  - _النوع_: `string`
  - _الافتراضي_: `'https://intlayer.org'`
  - _الوصف_: عنوان URL لنظام إدارة المحتوى Intlayer.
  - _مثال_: `'https://intlayer.org'`
  - _ملاحظة_: عنوان URL لنظام إدارة المحتوى Intlayer.

- **backendURL**:

  - _النوع_: `string`
  - _الافتراضي_: `https://back.intlayer.org`
  - _الوصف_: عنوان URL لخادم الخلفية.
  - _مثال_: `http://localhost:4000`

- **enabled**:

  - _النوع_: `boolean`
  - _الافتراضي_: `true`
  - _الوصف_: يشير إلى ما إذا كان التطبيق يتفاعل مع المحرر المرئي.
  - _مثال_: `process.env.NODE_ENV !== 'production'`
  - _ملاحظة_: إذا كانت القيمة true، فسيكون المحرر قادرًا على التفاعل مع التطبيق. إذا كانت القيمة false، فلن يتمكن المحرر من التفاعل مع التطبيق. في أي حال، يمكن تمكين المحرر فقط بواسطة المحرر المرئي. تعطيل المحرر لبيئات معينة هو وسيلة لتعزيز الأمان.

- **clientId**:

  - _النوع_: `string` | `undefined`
  - _الافتراضي_: `undefined`
  - _الوصف_: clientId و clientSecret يسمحان لحزم intlayer بالمصادقة مع الخلفية باستخدام مصادقة oAuth2. يتم استخدام رمز وصول للمصادقة على المستخدم المرتبط بالمشروع. للحصول على رمز وصول، انتقل إلى https://intlayer.org/dashboard/project وقم بإنشاء حساب.
  - _مثال_: `true`
  - _ملاحظة_: مهم: يجب الاحتفاظ بـ clientId و clientSecret بشكل سري وعدم مشاركتهما علنًا. يرجى التأكد من الاحتفاظ بهما في مكان آمن، مثل متغيرات البيئة.

- **clientSecret**:

  - _النوع_: `string` | `undefined`
  - _الافتراضي_: `undefined`
  - _الوصف_: clientId و clientSecret يسمحان لحزم intlayer بالمصادقة مع الخلفية باستخدام مصادقة oAuth2. يتم استخدام رمز وصول للمصادقة على المستخدم المرتبط بالمشروع. للحصول على رمز وصول، انتقل إلى https://intlayer.org/dashboard/project وقم بإنشاء حساب.
  - _مثال_: `true`
  - _ملاحظة_: مهم: يجب الاحتفاظ بـ clientId و clientSecret بشكل سري وعدم مشاركتهما علنًا. يرجى التأكد من الاحتفاظ بهما في مكان آمن، مثل متغيرات البيئة.

- **hotReload**:

  - _النوع_: `boolean`
  - _الافتراضي_: `false`
  - _الوصف_: يشير إلى ما إذا كان التطبيق يجب أن يقوم بإعادة تحميل تكوينات اللغة تلقائيًا عند اكتشاف تغيير.
  - _مثال_: `true`
  - _ملاحظة_: على سبيل المثال، عند إضافة أو تحديث قاموس جديد، سيقوم التطبيق بتحديث المحتوى لعرضه في الصفحة.
  - _ملاحظة_: لأن إعادة التحميل التلقائي تتطلب اتصالًا مستمرًا بالخادم، فهي متاحة فقط لعملاء خطة `enterprise`.

- **dictionaryPriorityStrategy**:
  - _النوع_: `string`
  - _الافتراضي_: `'local_first'`
  - _الوصف_: الإستراتيجية لتحديد أولويات القواميس في حالة وجود قواميس محلية وبعيدة. إذا تم تعيينها إلى `'distant_first'`، فسيعطي التطبيق الأولوية للقواميس البعيدة على القواميس المحلية. إذا تم تعيينها إلى `'local_first'`، فسيعطي التطبيق الأولوية للقواميس المحلية على القواميس البعيدة.
  - _مثال_: `'distant_first'`

### تكوين الوسيط

إعدادات تتحكم في سلوك الوسيط، بما في ذلك كيفية تعامل التطبيق مع الكوكيز، الرؤوس، والبادئات لعناوين URL لإدارة اللغة.

#### الخصائص

- **headerName**:
  - _النوع_: `string`
  - _الافتراضي_: `'x-intlayer-locale'`
  - _الوصف_: اسم رأس HTTP المستخدم لتحديد اللغة.
  - _مثال_: `'x-custom-locale'`
  - _ملاحظة_: هذا مفيد لتحديد اللغة بناءً على API.
- **cookieName**:
  - _النوع_: `string`
  - _الافتراضي_: `'intlayer-locale'`
  - _الوصف_: اسم الكوكي المستخدم لتخزين اللغة.
  - _مثال_: `'custom-locale'`
  - _ملاحظة_: يستخدم للحفاظ على اللغة عبر الجلسات.
- **prefixDefault**:
  - _النوع_: `boolean`
  - _الافتراضي_: `true`
  - _الوصف_: ما إذا كان يجب تضمين اللغة الافتراضية في عنوان URL.
  - _مثال_: `false`
  - _ملاحظة_: إذا كانت القيمة `false`، فلن تحتوي عناوين URL للغة الافتراضية على بادئة اللغة.
- **basePath**:
  - _النوع_: `string`
  - _الافتراضي_: `''`
  - _الوصف_: المسار الأساسي لعناوين URL للتطبيق.
  - _مثال_: `'/my-app'`
  - _ملاحظة_: يؤثر هذا على كيفية إنشاء عناوين URL للتطبيق.
- **serverSetCookie**:
  - _النوع_: `string`
  - _الافتراضي_: `'always'`
  - _الوصف_: قاعدة لتعيين كوكي اللغة على الخادم.
  - _الخيارات_: `'always'`, `'never'`
  - _مثال_: `'never'`
  - _ملاحظة_: يتحكم في ما إذا كان يتم تعيين كوكي اللغة في كل طلب أو أبدًا.
- **noPrefix**:
  - _النوع_: `boolean`
  - _الافتراضي_: `false`
  - _الوصف_: ما إذا كان يجب حذف بادئة اللغة من عناوين URL.
  - _مثال_: `true`
  - _ملاحظة_: إذا كانت القيمة `true`، فلن تحتوي عناوين URL على معلومات اللغة.

---

### تكوين المحتوى

إعدادات تتعلق بمعالجة المحتوى داخل التطبيق، بما في ذلك أسماء الدلائل، امتدادات الملفات، والتكوينات المشتقة.

#### الخصائص

- **watch**:
  - _النوع_: `boolean`
  - _الافتراضي_: `process.env.NODE_ENV === 'development'`
  - _الوصف_: يشير إلى ما إذا كان Intlayer يجب أن يراقب التغييرات في ملفات إعلان المحتوى في التطبيق لإعادة بناء القواميس ذات الصلة.
- **fileExtensions**:
  - _النوع_: `string[]`
  - _الافتراضي_: `['.content.ts', '.content.js', '.content.cjs', '.content.mjs', '.content.json', '.content.tsx', '.content.jsx']`
  - _الوصف_: امتدادات الملفات التي يجب البحث عنها عند بناء القواميس.
  - _مثال_: `['.data.ts', '.data.js', '.data.json']`
  - _ملاحظة_: تخصيص امتدادات الملفات يمكن أن يساعد في تجنب التعارضات.
- **baseDir**:
  - _النوع_: `string`
  - _الافتراضي_: `process.cwd()`
  - _الوصف_: الدليل الأساسي للمشروع.
  - _مثال_: `'/path/to/project'`
  - _ملاحظة_: يتم استخدام هذا لحل جميع الأدلة المتعلقة بـ Intlayer.
- **dictionaryOutput**:
  - _النوع_: `string[]`
  - _الافتراضي_: `['intlayer']`
  - _الوصف_: نوع إخراج القاموس الذي يجب استخدامه، مثل `'intlayer'` أو `'i18next'`.
- **contentDirName**:
  - _النوع_: `string`
  - _الافتراضي_: `'src'`
  - _الوصف_: اسم الدليل الذي يتم تخزين المحتوى فيه.
  - _مثال_: `'data'`, `'content'`, `'locales'`
  - _ملاحظة_: إذا لم يكن في مستوى الدليل الأساسي، قم بتحديث `contentDir`.
- **contentDir**:

  - _النوع_: `string`
  - _مشتق من_: `'baseDir'` / `'contentDirName'`
  - _الوصف_: مسار الدليل حيث يتم تخزين المحتوى.

- **resultDirName**:
  - _النوع_: `string`
  - _الافتراضي_: `'.intlayer'`
  - _الوصف_: اسم الدليل حيث يتم تخزين النتائج.
  - _مثال_: `'outputOFIntlayer'`
  - _ملاحظة_: إذا لم يكن هذا الدليل في المستوى الأساسي، قم بتحديث `resultDir`.
- **resultDir**:

  - _النوع_: `string`
  - _مشتق من_: `'baseDir'` / `'resultDirName'`
  - _الوصف_: مسار الدليل لتخزين النتائج الوسيطة أو النهائية.

- **moduleAugmentationDirName**:

  - _النوع_: `string`
  - _الافتراضي_: `'types'`
  - _الوصف_: دليل لتوسيع الوحدة، مما يسمح باقتراحات أفضل في IDE وفحص الأنواع.
  - _مثال_: `'intlayer-types'`
  - _ملاحظة_: تأكد من تضمين هذا في `tsconfig.json`.

- **moduleAugmentationDir**:

  - _النوع_: `string`
  - _مشتق من_: `'baseDir'` / `'moduleAugmentationDirName'`
  - _الوصف_: المسار لتوسيع الوحدة وتعريفات الأنواع الإضافية.

- **dictionariesDirName**:
  - _النوع_: `string`
  - _الافتراضي_: `'dictionary'`
  - _الوصف_: دليل لتخزين القواميس.
  - _مثال_: `'translations'`
  - _ملاحظة_: إذا لم يكن في مستوى دليل النتائج، قم بتحديث `dictionariesDir`.
- **dictionariesDir**:

  - _النوع_: `string`
  - _مشتق من_: `'resultDir'` / `'dictionariesDirName'`
  - _الوصف_: الدليل لتخزين قواميس الترجمة.

- **i18nextResourcesDirName**:
  - _النوع_: `string`
  - _الافتراضي_: `'i18next_dictionary'`
  - _الوصف_: دليل لتخزين قواميس i18n.
  - _مثال_: `'translations'`
  - _ملاحظة_: إذا لم يكن في مستوى دليل النتائج، قم بتحديث `i18nextResourcesDir`.
  - _ملاحظة_: تأكد من أن إخراج قواميس i18n يتضمن i18next لبناء القواميس لـ i18next
- **i18nextResourcesDir**:

  - _النوع_: `string`
  - _مشتق من_: `'resultDir'` / `'i18nextResourcesDirName'`
  - _الوصف_: الدليل لتخزين قواميس i18n.
  - _ملاحظة_: تأكد من تكوين هذا الدليل لنوع إخراج i18next.

- **typeDirName**:

  - _النوع_: `string`
  - _الافتراضي_: `'types'`
  - _الوصف_: دليل لتخزين أنواع القواميس.
  - _مثال_: `'intlayer-types'`
  - _ملاحظة_: إذا لم يكن في مستوى دليل النتائج، قم بتحديث `typesDir`.

- **typesDir**:

  - _النوع_: `string`
  - _مشتق من_: `'resultDir'` / `'typeDirName'`
  - _الوصف_: الدليل لتخزين أنواع القواميس.

- **mainDirName**:
  - _النوع_: `string`
  - _الافتراضي_: `'main'`
  - _الوصف_: دليل لتخزين الملفات الرئيسية.
  - _مثال_: `'intlayer-main'`
  - _ملاحظة_: إذا لم يكن في مستوى دليل النتائج، قم بتحديث `mainDir`.
- **mainDir**:
  - _النوع_: `string`
  - _مشتق من_: `'resultDir'` / `'mainDirName'`
  - _الوصف_: الدليل حيث يتم تخزين الملفات الرئيسية للتطبيق.
- **excludedPath**:
  - _النوع_: `string[]`
  - _الافتراضي_: `['node_modules']`
  - _الوصف_: الأدلة المستبعدة من البحث عن المحتوى.
  - _ملاحظة_: هذا الإعداد لم يتم استخدامه بعد، ولكنه مخطط للتنفيذ في المستقبل.

### تكوين السجل

إعدادات تتحكم في السجل، بما في ذلك البادئة التي يجب استخدامها.

#### الخصائص

- **mode**:
  - _النوع_: `string`
  - _الافتراضي_: `default`
  - _الوصف_: يشير إلى وضع السجل.
  - _الخيارات_: `default`, `verbose`, `disabled`
  - _مثال_: `default`
  - _ملاحظة_: وضع السجل. وضع verbose سيسجل المزيد من المعلومات، ولكن يمكن استخدامه لأغراض التصحيح. وضع disabled سيعطل السجل.
- **prefix**:
  - _النوع_: `string`
  - _الافتراضي_: `'[intlayer] '`
  - _الوصف_: بادئة السجل.
  - _مثال_: `'[my custom prefix] '`
  - _ملاحظة_: بادئة السجل.
